"use strict";
// SPDX-License-Identifier: MIT
// Copyright (c) 2020 Daimler TSS GmbH
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var assetResolver_1 = require("../componentLoader/lib/assetResolver");
var ComponentLoader_1 = require("../componentLoader/lib/ComponentLoader");
var EventEmitter_1 = require("../interconnection/EventEmitter");
var InterconnectionService_1 = require("../interconnection/InterconnectionService");
var DefaultRouterStrategy_1 = require("../router/lib/urlFormatStrategy/DefaultRouterStrategy");
var serviceIds_1 = require("./serviceIds");
function registerDefaultDependencies(container, name) {
    container.bind(serviceIds_1.default.name).toConstantValue(name);
    container.bind(serviceIds_1.default.currentSwidget.isHotLoaded).toConstantValue(false);
    container.bind(serviceIds_1.default.currentSwidget.uniqueId).toConstantValue('');
    /** swidget loader  */
    container.bind(ComponentLoader_1.default).toConstantValue(new ComponentLoader_1.default());
    /** router */
    container.bind(serviceIds_1.default.routes).toConstantValue([
        {
            /* eslint-disable react/display-name */
            component: function () { return React.createElement("h1", null, "Hello World"); },
            /* eslint-enable react/display-name */
            name: 'home',
            pattern: '/',
        },
    ]);
    container.bind(serviceIds_1.default.routerUrlFormatStrategy).toDynamicValue(function () {
        return new DefaultRouterStrategy_1.default(null, null);
    });
    /** start with empty translations */
    container.bind(serviceIds_1.default.translations).toConstantValue({});
    /** interconnection */
    container.bind(EventEmitter_1.EventEmitter).toConstantValue(new EventEmitter_1.EventEmitter());
    container.bind(InterconnectionService_1.InterconnectionService).toDynamicValue(function (diContext) {
        var appName = diContext.container.get(serviceIds_1.default.name);
        var isHotLoaded = diContext.container.get(serviceIds_1.default.currentSwidget.isHotLoaded);
        var eventEmitter = diContext.container.get(EventEmitter_1.EventEmitter);
        return new InterconnectionService_1.InterconnectionService(appName, isHotLoaded, eventEmitter);
    });
    /** asset resolver */
    var url = new URL(window.location.href);
    container.bind(serviceIds_1.default.currentSwidget.url).toConstantValue(url);
    container.bind(serviceIds_1.default.currentSwidget.assetResolver).toConstantValue(assetResolver_1.getDefaultAssetResolver(url));
}
registerDefaultDependencies.displayName = 'registerDefaultDependencies';
exports.default = registerDefaultDependencies;
//# sourceMappingURL=registerDefaultDependencies.js.map