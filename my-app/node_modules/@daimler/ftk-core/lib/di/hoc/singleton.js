"use strict";
// SPDX-License-Identifier: MIT
// Copyright (c) 2020 Daimler TSS GmbH
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = require("react");
var withInject_1 = require("./withInject");
/**
 * Ensures the supplied Component is only rendered once at any given time. This is important
 * for service providers which might be referenced multiple times (i.e. notification service)
 * but should not re-bind services to DI or introduce new DOM elements when already rendered.
 */
var singleton = function (boundServiceId, Component) {
    return withInject_1.default(/** @class */ (function (_super) {
        tslib_1.__extends(class_1, _super);
        function class_1() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.displayName = 'singletonWithInject';
            return _this;
        }
        class_1.prototype.render = function () {
            if (this.props.container.isBound(boundServiceId)) {
                return this.props.children;
            }
            else {
                return React.createElement(Component, tslib_1.__assign({}, this.props), this.props.children);
            }
        };
        return class_1;
    }(React.Component)));
};
exports.default = singleton;
//# sourceMappingURL=singleton.js.map