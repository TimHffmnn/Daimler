"use strict";
// SPDX-License-Identifier: MIT
// Copyright (c) 2020 Daimler TSS GmbH
Object.defineProperty(exports, "__esModule", { value: true });
var lodash_1 = require("lodash");
var Registry_1 = require("../../util/Registry");
var TranslationMap = /** @class */ (function () {
    function TranslationMap() {
    }
    TranslationMap.merge = function (originalMap, updatingMap) {
        return lodash_1.merge(lodash_1.cloneDeep(originalMap), updatingMap);
    };
    TranslationMap.convert = function (map) {
        var languages = lodash_1.keys(map);
        var translationIds = [];
        var translations = [];
        lodash_1.forEach(languages, function (language) {
            translationIds = lodash_1.uniq(translationIds.concat(lodash_1.keys(lodash_1.get(map, language, []))));
        });
        lodash_1.forEach(translationIds, function (translationId) {
            var translation = {
                messages: new Registry_1.Registry(),
                translationId: translationId,
            };
            lodash_1.forEach(languages, function (lang) {
                var message = lodash_1.get(map, [lang, translationId], null);
                if (message === null) {
                    throw new Error("missing translationId \"" + translationId + "\" in " + lang);
                }
                translation.messages.add(lang, { lang: lang, message: message });
            });
            translations.push(translation);
        });
        return translations;
    };
    return TranslationMap;
}());
exports.default = TranslationMap;
//# sourceMappingURL=TranslationMap.js.map