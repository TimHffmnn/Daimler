"use strict";
// SPDX-License-Identifier: MIT
// Copyright (c) 2020 Daimler TSS GmbH
Object.defineProperty(exports, "__esModule", { value: true });
var CleanupToken = /** @class */ (function () {
    function CleanupToken() {
        this.cleanupFunctions = [];
        this.finished = false;
    }
    CleanupToken.prototype.add = function (cleanupFunction) {
        if (this.finished === true) {
            throw new Error('cleanup already called');
        }
        else {
            this.cleanupFunctions.push(cleanupFunction);
        }
    };
    CleanupToken.prototype.cleanup = function () {
        if (this.finished) {
            throw new Error('cleanup already called');
        }
        else {
            this.finished = true;
            this.cleanupFunctions.map(function (fn) {
                fn(undefined);
            });
        }
    };
    return CleanupToken;
}());
exports.CleanupToken = CleanupToken;
//# sourceMappingURL=CleanupToken.js.map